{
    "componentChunkName": "component---src-templates-code-post-js",
    "path": "/code/2022-04-21-code-examples-of-the-mediacreators-nodejs-website/",
    "result": {"data":{"markdownRemark":{"id":"f708efa8-62b3-5218-a6bb-8cdd65756c9d","html":"<h2>1 — Internet Connection Examples (<code>4g</code> + <code>3g</code>/<code>slow-2g</code>)</h2>\n<p>On this chapter, we can find a few examples of code, thought to take the most advantage of the user's internet connection type. These connection types can vary from <code>4g</code>, <code>3g</code>, <code>2g</code> and <code>slow-2g</code>. For the sake of simplicity, we are going to ignore the <code>2g</code> one and use <code>slow-2g</code> instead, as it is the slowest internet connection (GPRS).</p>\n<p>Have in mind that, by default, Prismic already serves all the images with a reasonable quality/compression ratio. As a plus, it serves already all the images with a <code>.webp</code> and it converts <code>.gif</code> files to animated <code>.webp</code> files. The images end-up by having a good final file size served from Prismic.</p>\n<p>We use the <a href=\"https://pugjs.org/api/getting-started.html\" target=\"_blank\" rel=\"noopener\">PugJS</a> as template engine to make use of it's magic on serving dynamic data, with NodeJS. To achieve this, we set a JavaScript cookie on the <code>base.pug</code> file, after checking the user's connection type at the very beginning of the request. This \"internet connection check-test\" it runs every type the user navigates between pages.</p>\n<p>As a good example for this use case scenario is, for instance, on an indoor market, where the internet connection is not so good, and it's changing quite frequently between <code>3g</code> and <code>slow-2g</code>. With this approach, we can quickly serve more compressed images, that will take less time to be loaded. This will give a better experience to the user and will keep the user motivated to wait a bit more, but not give it up. We show a background color on all images, based on its main color, picked by hand, to keep the branding aspect in mind.</p>\n<h3>1.1 — Check user's internet connection type with JavaScript &#x26; server the appropriated media files with ExpressJS</h3>\n<p>The following JavaScript code is executed on the <code>&#x3C;head></code> HTML element, right after the SEO metatags. This code snippet it will add to check the user's internet connection with the help of <code>navigator.connection?.effectiveType</code>.</p>\n<p>Browser compatibility: <strong>Chrome based browsers</strong> and <strong>Opera</strong> only. No support for Safari. In case the browser doesn't support <code>navigator.connection.effectiveType</code> we will just serve the <code>4g</code> assets.</p>\n<pre class=\"grvsc-container abyss\" data-language=\"pug\" data-index=\"0\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">//- Check Internet Connection</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">//- on initial page load</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">script</span><span class=\"mtk1\">.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  document.cookie </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">`connection=; expires = Thu, 01 Jan 1970 00:00:00 GMT`</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  document.cookie </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">`connection=${</span><span class=\"mtk1\">navigator.connection?.effectiveType</span><span class=\"mtk11\">}`</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk7\">!</span><span class=\"mtk1\">window.location.hash) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">// redirects the user,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    window.location </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> window.location </span><span class=\"mtk7\">+</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&#39;#loaded&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    window.location.</span><span class=\"mtk6\">reload</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  } </span><span class=\"mtk7\">else</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    history.</span><span class=\"mtk6\">pushState</span><span class=\"mtk1\">(</span><span class=\"mtk11\">&quot;&quot;</span><span class=\"mtk1\">, document.title, window.location.pathname)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span></code></pre>\n<p>Now let's get use of this cookie <code>connection</code> from the client-side and serve the appropriated media (using ExpressJS as a server).</p>\n<p>This is the reference code of our <code>app.js</code> file:</p>\n<pre class=\"grvsc-container abyss\" data-language=\"pug\" data-index=\"1\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">const</span><span class=\"mtk1\"> cookieSession = require(&#39;cookie-session&#39;);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">app</span><span class=\"mtk6\">.use</span><span class=\"mtk1\">(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk6\">cookieSession({</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">    name: &#39;session&#39;,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">    keys: [&#39;key1&#39;, &#39;key2&#39;],</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">    maxAge: 15 * 60 * 1000, // 15 minutes</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">  })</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">app</span><span class=\"mtk6\">.use</span><span class=\"mtk1\">(</span><span class=\"mtk6\">(req, res, next)</span><span class=\"mtk1\"> =</span><span class=\"mtk7\">&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk15 mtki\">const</span><span class=\"mtk1\"> ua </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">UAParser</span><span class=\"mtk1\">(req.headers[</span><span class=\"mtk11\">&#39;user-agent&#39;</span><span class=\"mtk1\">]);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  res.locals.isDesktop </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> ua.device.type </span><span class=\"mtk7\">===</span><span class=\"mtk1\"> </span><span class=\"mtk4\">undefined</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  res.locals.isPhone </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> ua.device.type </span><span class=\"mtk7\">===</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&#39;mobile&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  res.locals.isTablet </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> ua.device.type </span><span class=\"mtk7\">===</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&#39;tablet&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  res.locals.Link </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> handleLinkResolver;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  res.locals.PrismicDOM </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> PrismicDOM;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">if</span><span class=\"mtk1\"> (res.locals.connection </span><span class=\"mtk7\">==</span><span class=\"mtk1\"> </span><span class=\"mtk4\">undefined</span><span class=\"mtk1\"> </span><span class=\"mtk7\">&amp;&amp;</span><span class=\"mtk1\"> req.headers.cookie) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">// returns an object with the cookies&#39; name as keys</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk15 mtki\">const</span><span class=\"mtk1\"> </span><span class=\"mtk6\">getAppCookies</span><span class=\"mtk1\"> </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> (</span><span class=\"mtk19 mtki\">req</span><span class=\"mtk1\">) </span><span class=\"mtk15 mtki\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk3\">// We extract the raw cookies from the request headers</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk15 mtki\">const</span><span class=\"mtk1\"> rawCookies </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> req.headers.cookie.</span><span class=\"mtk6\">split</span><span class=\"mtk1\">(</span><span class=\"mtk11\">&#39;; &#39;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk15 mtki\">const</span><span class=\"mtk1\"> parsedCookies </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> {};</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      rawCookies.</span><span class=\"mtk6\">forEach</span><span class=\"mtk1\">((</span><span class=\"mtk19 mtki\">rawCookie</span><span class=\"mtk1\">) </span><span class=\"mtk15 mtki\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk15 mtki\">const</span><span class=\"mtk1\"> parsedCookie </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> rawCookie.</span><span class=\"mtk6\">split</span><span class=\"mtk1\">(</span><span class=\"mtk11\">&#39;=&#39;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        parsedCookies[parsedCookie[</span><span class=\"mtk4\">0</span><span class=\"mtk1\">]] </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> parsedCookie[</span><span class=\"mtk4\">1</span><span class=\"mtk1\">];</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      });</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk7\">return</span><span class=\"mtk1\"> parsedCookies;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    };</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk15 mtki\">let</span><span class=\"mtk1\"> connection </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">getAppCookies</span><span class=\"mtk1\">(req, res)[</span><span class=\"mtk11\">&#39;connection&#39;</span><span class=\"mtk1\">];</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    res.locals.connection </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> connection;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk15 mtki\">console</span><span class=\"mtk1\">.</span><span class=\"mtk15\">log</span><span class=\"mtk1\">(</span><span class=\"mtk11\">&#39;connect on the server&#39;</span><span class=\"mtk1\">, connection);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  } </span><span class=\"mtk7\">else</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    res.locals.connection </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> req.body.connection;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk6\">next</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">});</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">app</span><span class=\"mtk6\">.set</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&#39;views&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk6\">path.join(__dirname, &#39;views&#39;)</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">app</span><span class=\"mtk6\">.set</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&#39;view</span><span class=\"mtk1\"> </span><span class=\"mtk6\">engine&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk6\">&#39;pug&#39;</span><span class=\"mtk1\">);</span></span></span></code></pre>\n<h3>1.2 — Video example (with Image fallback)</h3>\n<p>The desired element on this media object is the HTML element <code>&#x3C;video></code> and is only served when the <strong>user</strong> is on a <code>4g</code> connection. In case the user is on a bad connection type, for instance <code>3g</code> or <code>slow-2g</code>, an <code>&#x3C;img></code> HTML element will be served.</p>\n<h4>Notes</h4>\n<ol>\n<li>\n<p>In order to get even a better performance, and page load speed, we are using <code>.replace('?auto=compress,format', '?q=30&#x26;auto=compress,format')</code> to request a 70% optimized image, from the image processor of Prismic: <a href=\"https://prismic.io/blog/prismic-image-optimization-imgix\" title=\"See official post on Prismic.io\" target=\"_blank\" rel=\"noopener\"><code>imgix</code></a>.</p>\n</li>\n<li>\n<p>For desktop devices, it is better to set a maximum size of 1200px wide, by using <code>&#x26;w=1200</code> at the end of the quality parameter from the previous point.</p>\n</li>\n<li>\n<p>For mobile devices, the default <code>width</code> of all the images are <strong>480px</strong>, because is higher than the default 360px screen phone's width. This is helpful, because it serves a better image for high DPI screens, without the need for using a <code>@2x</code> image. In our case, the most important is the overall <a href=\"https://design-code.tips/tags/performance/\" target=\"_blank\" rel=\"noopener\">Performance of the website</a>.</p>\n</li>\n</ol>\n<h4>Example code — Video on <code>4g</code> only</h4>\n<pre class=\"grvsc-container abyss\" data-language=\"pug\" data-index=\"2\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">figure</span><span class=\"mtk6\">.home__hero__media</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">picture</span><span class=\"mtk1\">(</span><span class=\"mtk6\">height</span><span class=\"mtk1\">=</span><span class=\"mtk11\">`${</span><span class=\"mtk1\">home.data.video[</span><span class=\"mtk4\">0</span><span class=\"mtk1\">].video_preview.dimensions.height</span><span class=\"mtk11\">}`</span><span class=\"mtk1\"> </span><span class=\"mtk6\">width</span><span class=\"mtk1\">=</span><span class=\"mtk11\">`${</span><span class=\"mtk1\">home.data.video[</span><span class=\"mtk4\">0</span><span class=\"mtk1\">].video_preview.dimensions.width</span><span class=\"mtk11\">}`</span><span class=\"mtk1\"> </span><span class=\"mtk6\">style</span><span class=\"mtk1\">=</span><span class=\"mtk11\">`background-color: ${</span><span class=\"mtk1\">home.data.video[</span><span class=\"mtk4\">0</span><span class=\"mtk1\">].background_color</span><span class=\"mtk11\">}`</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk15 mtki\">if</span><span class=\"mtk1\"> (connection </span><span class=\"mtk7\">===</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&#39;4g&#39;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">||</span><span class=\"mtk1\"> connection </span><span class=\"mtk7\">===</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&#39;undefined&#39;</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk7\">video</span><span class=\"mtk1\">(</span><span class=\"mtk6\">preload</span><span class=\"mtk1\">=</span><span class=\"mtk11\">&quot;auto&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk6\">playsinline</span><span class=\"mtk1\"> </span><span class=\"mtk6\">loop</span><span class=\"mtk1\"> </span><span class=\"mtk6\">muted</span><span class=\"mtk1\"> </span><span class=\"mtk6\">disablepictureinpicture</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk6\">srcset</span><span class=\"mtk1\">=</span><span class=\"mtk11\">`</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">          ${</span><span class=\"mtk1\">home.data.video[</span><span class=\"mtk4\">0</span><span class=\"mtk1\">].video_mobile.url</span><span class=\"mtk11\">} 768w,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">          ${</span><span class=\"mtk1\">home.data.video[</span><span class=\"mtk4\">0</span><span class=\"mtk1\">].video_desktop.url</span><span class=\"mtk11\">} 769w</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">        `</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk15 mtki\">else</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk15 mtki\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk7\">typeof</span><span class=\"mtk1\">(home.data.video[</span><span class=\"mtk4\">0</span><span class=\"mtk1\">].video_preview.phone) </span><span class=\"mtk7\">!==</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&#39;undefined&#39;</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk7\">source</span><span class=\"mtk1\">(</span><span class=\"mtk6\">media</span><span class=\"mtk1\">=</span><span class=\"mtk11\">&#39;(max-width: 768px)&#39;</span><span class=\"mtk1\"> </span><span class=\"mtk6\">srcset</span><span class=\"mtk1\">=</span><span class=\"mtk11\">`${</span><span class=\"mtk1\">home.data.video[</span><span class=\"mtk4\">0</span><span class=\"mtk1\">].video_preview.phone.url.</span><span class=\"mtk6\">replace</span><span class=\"mtk1\">(</span><span class=\"mtk11\">&#39;?auto=compress,format&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk11\">&#39;?q=30&amp;auto=compress,format&#39;</span><span class=\"mtk1\">)</span><span class=\"mtk11\">}`</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk7\">source</span><span class=\"mtk1\">(</span><span class=\"mtk6\">media</span><span class=\"mtk1\">=</span><span class=\"mtk11\">&#39;(min-width: 769px)&#39;</span><span class=\"mtk1\"> </span><span class=\"mtk6\">srcset</span><span class=\"mtk1\">=</span><span class=\"mtk11\">`${</span><span class=\"mtk1\">home.data.video[</span><span class=\"mtk4\">0</span><span class=\"mtk1\">].video_preview.url.</span><span class=\"mtk6\">replace</span><span class=\"mtk1\">(</span><span class=\"mtk11\">&#39;?auto=compress,format&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk11\">&#39;?q=30&amp;w=1200&amp;auto=compress,format&#39;</span><span class=\"mtk1\">)</span><span class=\"mtk11\">}`</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk7\">img</span><span class=\"mtk1\">(</span><span class=\"mtk6\">alt</span><span class=\"mtk1\">=home.data.video[</span><span class=\"mtk4\">0</span><span class=\"mtk1\">].video_preview.alt </span><span class=\"mtk6\">data-src</span><span class=\"mtk1\">=home.data.video[</span><span class=\"mtk4\">0</span><span class=\"mtk1\">].video_preview.url </span><span class=\"mtk6\">height</span><span class=\"mtk1\">=</span><span class=\"mtk11\">`${</span><span class=\"mtk1\">home.data.video[</span><span class=\"mtk4\">0</span><span class=\"mtk1\">].video_preview.dimensions.height</span><span class=\"mtk11\">}`</span><span class=\"mtk1\"> </span><span class=\"mtk6\">width</span><span class=\"mtk1\">=</span><span class=\"mtk11\">`${</span><span class=\"mtk1\">home.data.video[</span><span class=\"mtk4\">0</span><span class=\"mtk1\">].video_preview.dimensions.width</span><span class=\"mtk11\">}`</span><span class=\"mtk1\">)</span></span></span></code></pre>\n<h4>Example code — Media can be a <code>&#x3C;video></code> element or a <code>&#x3C;img></code> element. Then, check the user's internet connection to serve video or image</h4>\n<pre class=\"grvsc-container abyss\" data-language=\"pug\" data-index=\"3\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">figure</span><span class=\"mtk6\">.work_page__full-screen__media</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">picture</span><span class=\"mtk1\">(</span><span class=\"mtk6\">height</span><span class=\"mtk1\">=</span><span class=\"mtk11\">`${</span><span class=\"mtk1\">section.primary.image.dimensions.height</span><span class=\"mtk11\">}`</span><span class=\"mtk1\"> </span><span class=\"mtk6\">width</span><span class=\"mtk1\">=</span><span class=\"mtk11\">`${</span><span class=\"mtk1\">section.primary.image.dimensions.width</span><span class=\"mtk11\">}`</span><span class=\"mtk1\"> </span><span class=\"mtk6\">style</span><span class=\"mtk1\">=</span><span class=\"mtk11\">`background-color: ${</span><span class=\"mtk1\">section.primary.background_color</span><span class=\"mtk11\">}`</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">    //- is video &amp;&amp; is on 4g</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk15 mtki\">if</span><span class=\"mtk1\"> (section.primary.is_video </span><span class=\"mtk7\">===</span><span class=\"mtk1\"> </span><span class=\"mtk4\">true</span><span class=\"mtk1\"> </span><span class=\"mtk7\">&amp;&amp;</span><span class=\"mtk1\"> (connection </span><span class=\"mtk7\">===</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&#39;4g&#39;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">||</span><span class=\"mtk1\"> connection </span><span class=\"mtk7\">===</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&#39;undefined&#39;</span><span class=\"mtk1\">))</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk7\">video</span><span class=\"mtk1\">(</span><span class=\"mtk6\">preload</span><span class=\"mtk1\">=</span><span class=\"mtk11\">&quot;auto&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk6\">playsinline</span><span class=\"mtk1\"> </span><span class=\"mtk6\">loop</span><span class=\"mtk1\"> </span><span class=\"mtk6\">muted</span><span class=\"mtk1\"> </span><span class=\"mtk6\">disablepictureinpicture</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk6\">srcset</span><span class=\"mtk1\">=</span><span class=\"mtk11\">`</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">          ${</span><span class=\"mtk1\">section.primary.video_mobile.url</span><span class=\"mtk11\">} 768w,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">          ${</span><span class=\"mtk1\">section.primary.video_desktop.url</span><span class=\"mtk11\">} 769w</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">        `</span><span class=\"mtk1\"> </span><span class=\"mtk6\">style</span><span class=\"mtk1\">=</span><span class=\"mtk11\">`background-color: ${</span><span class=\"mtk1\">section.primary.background_color</span><span class=\"mtk11\">}`</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">    //- is video &amp;&amp; is not on 4g: show image</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk15 mtki\">else if</span><span class=\"mtk1\"> (section.primary.is_video </span><span class=\"mtk7\">===</span><span class=\"mtk1\"> </span><span class=\"mtk4\">true</span><span class=\"mtk1\"> </span><span class=\"mtk7\">&amp;&amp;</span><span class=\"mtk1\"> connection </span><span class=\"mtk7\">!==</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&#39;4g&#39;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">&amp;&amp;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">typeof</span><span class=\"mtk1\">(section.primary.image.phone) </span><span class=\"mtk7\">!==</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&#39;undefined&#39;</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk7\">source</span><span class=\"mtk1\">(</span><span class=\"mtk6\">media</span><span class=\"mtk1\">=</span><span class=\"mtk11\">&#39;(max-width: 768px)&#39;</span><span class=\"mtk1\"> </span><span class=\"mtk6\">srcset</span><span class=\"mtk1\">=</span><span class=\"mtk11\">`${</span><span class=\"mtk1\">section.primary.image.phone.url.</span><span class=\"mtk6\">replace</span><span class=\"mtk1\">(</span><span class=\"mtk11\">&#39;?auto=compress,format&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk11\">&#39;?q=30&amp;auto=compress,format&#39;</span><span class=\"mtk1\">)</span><span class=\"mtk11\">}`</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk7\">source</span><span class=\"mtk1\">(</span><span class=\"mtk6\">media</span><span class=\"mtk1\">=</span><span class=\"mtk11\">&#39;(min-width: 769px)&#39;</span><span class=\"mtk1\"> </span><span class=\"mtk6\">srcset</span><span class=\"mtk1\">=</span><span class=\"mtk11\">`${</span><span class=\"mtk1\">section.primary.image.url.</span><span class=\"mtk6\">replace</span><span class=\"mtk1\">(</span><span class=\"mtk11\">&#39;?auto=compress,format&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk11\">&#39;?q=30&amp;w=1200&amp;auto=compress,format&#39;</span><span class=\"mtk1\">)</span><span class=\"mtk11\">}`</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk7\">img</span><span class=\"mtk1\">(</span><span class=\"mtk6\">alt</span><span class=\"mtk1\">=section.primary.image.alt </span><span class=\"mtk6\">data-src</span><span class=\"mtk1\">=section.primary.image.url </span><span class=\"mtk6\">height</span><span class=\"mtk1\">=</span><span class=\"mtk11\">`${</span><span class=\"mtk1\">section.primary.image.dimensions.height</span><span class=\"mtk11\">}`</span><span class=\"mtk1\"> </span><span class=\"mtk6\">width</span><span class=\"mtk1\">=</span><span class=\"mtk11\">`${</span><span class=\"mtk1\">section.primary.image.dimensions.width</span><span class=\"mtk11\">}`</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">    //- is image</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk15 mtki\">else</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk15 mtki\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk7\">typeof</span><span class=\"mtk1\">(section.primary.image.phone) </span><span class=\"mtk7\">!==</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&#39;undefined&#39;</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk7\">source</span><span class=\"mtk1\">(</span><span class=\"mtk6\">media</span><span class=\"mtk1\">=</span><span class=\"mtk11\">&#39;(max-width: 768px)&#39;</span><span class=\"mtk1\"> </span><span class=\"mtk6\">srcset</span><span class=\"mtk1\">=</span><span class=\"mtk11\">`${</span><span class=\"mtk1\">connection </span><span class=\"mtk7\">===</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&#39;4g&#39;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">||</span><span class=\"mtk1\"> connection </span><span class=\"mtk7\">===</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&#39;undefined&#39;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">?</span><span class=\"mtk1\"> section.primary.image.phone.url </span><span class=\"mtk7\">:</span><span class=\"mtk1\"> section.primary.image.phone.url.</span><span class=\"mtk6\">replace</span><span class=\"mtk1\">(</span><span class=\"mtk11\">&#39;?auto=compress,format&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk11\">&#39;?q=30&amp;auto=compress,format&#39;</span><span class=\"mtk1\">)</span><span class=\"mtk11\">}`</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk7\">source</span><span class=\"mtk1\">(</span><span class=\"mtk6\">media</span><span class=\"mtk1\">=</span><span class=\"mtk11\">&#39;(min-width: 769px)&#39;</span><span class=\"mtk1\"> </span><span class=\"mtk6\">srcset</span><span class=\"mtk1\">=</span><span class=\"mtk11\">`${</span><span class=\"mtk1\">connection </span><span class=\"mtk7\">===</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&#39;4g&#39;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">||</span><span class=\"mtk1\"> connection </span><span class=\"mtk7\">===</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&#39;undefined&#39;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">?</span><span class=\"mtk1\"> section.primary.image.url.</span><span class=\"mtk6\">replace</span><span class=\"mtk1\">(</span><span class=\"mtk11\">&#39;?auto=compress,format&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk11\">&#39;&#39;</span><span class=\"mtk1\">) </span><span class=\"mtk7\">:</span><span class=\"mtk1\"> section.primary.image.url.</span><span class=\"mtk6\">replace</span><span class=\"mtk1\">(</span><span class=\"mtk11\">&#39;?auto=compress,format&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk11\">&#39;?q=30&amp;w=1200&amp;auto=compress,format&#39;</span><span class=\"mtk1\">)</span><span class=\"mtk11\">}`</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk7\">img</span><span class=\"mtk1\">(</span><span class=\"mtk6\">alt</span><span class=\"mtk1\">=section.primary.image.alt </span><span class=\"mtk6\">data-src</span><span class=\"mtk1\">=section.primary.image.url.</span><span class=\"mtk6\">replace</span><span class=\"mtk1\">(</span><span class=\"mtk11\">&#39;?auto=compress,format&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk11\">&#39;&#39;</span><span class=\"mtk1\">) </span><span class=\"mtk6\">height</span><span class=\"mtk1\">=</span><span class=\"mtk11\">`${</span><span class=\"mtk1\">section.primary.image.dimensions.height</span><span class=\"mtk11\">}`</span><span class=\"mtk1\"> </span><span class=\"mtk6\">width</span><span class=\"mtk1\">=</span><span class=\"mtk11\">`${</span><span class=\"mtk1\">section.primary.image.dimensions.width</span><span class=\"mtk11\">}`</span><span class=\"mtk1\">)</span></span></span></code></pre>\n<h3>1.3 — Image example (<code>4g</code> vs <code>3g</code>/<code>slow-2g</code>)</h3>\n<p>Ideally, with <code>4g</code>, we serve a more sharped image (without any compression) and we use <code>.replace('?auto=compress,format', '')</code> to replace the default auto-compressed file from Prismic's CDN (with <a href=\"https://prismic.io/blog/prismic-image-optimization-imgix\" title=\"See official post on Prismic.io\" target=\"_blank\" rel=\"noopener\"><code>imgix</code></a>).</p>\n<p>If the user is on a bad connection (<code>3g</code> or <code>slow-2g</code>), we serve a 70% optimized image from the request to the Prismic CDN (with <a href=\"https://prismic.io/blog/prismic-image-optimization-imgix\" title=\"See official post on Prismic.io\" target=\"_blank\" rel=\"noopener\"><code>imgix</code></a>).</p>\n<h4>Example code — Sharper images on <code>4g</code></h4>\n<pre class=\"grvsc-container abyss\" data-language=\"pug\" data-index=\"4\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">figure</span><span class=\"mtk6\">.home__projects__item__media</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">picture</span><span class=\"mtk1\">(</span><span class=\"mtk6\">height</span><span class=\"mtk1\">=</span><span class=\"mtk11\">`${</span><span class=\"mtk1\">project.project_image.dimensions.height</span><span class=\"mtk11\">}`</span><span class=\"mtk1\"> </span><span class=\"mtk6\">width</span><span class=\"mtk1\">=</span><span class=\"mtk11\">`${</span><span class=\"mtk1\">project.project_image.dimensions.width</span><span class=\"mtk11\">}`</span><span class=\"mtk1\"> </span><span class=\"mtk6\">style</span><span class=\"mtk1\">=</span><span class=\"mtk11\">`background-color: ${</span><span class=\"mtk1\">project.background_color</span><span class=\"mtk11\">}`</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk15 mtki\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk7\">typeof</span><span class=\"mtk1\">(project.project_image.phone) </span><span class=\"mtk7\">!==</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&#39;undefined&#39;</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk7\">source</span><span class=\"mtk1\">(</span><span class=\"mtk6\">media</span><span class=\"mtk1\">=</span><span class=\"mtk11\">&#39;(max-width: 768px)&#39;</span><span class=\"mtk1\"> </span><span class=\"mtk6\">srcset</span><span class=\"mtk1\">=</span><span class=\"mtk11\">`${</span><span class=\"mtk1\">connection </span><span class=\"mtk7\">===</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&#39;4g&#39;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">||</span><span class=\"mtk1\"> connection </span><span class=\"mtk7\">===</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&#39;undefined&#39;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">?</span><span class=\"mtk1\"> project.project_image.phone.url </span><span class=\"mtk7\">:</span><span class=\"mtk1\"> project.project_image.phone.url.</span><span class=\"mtk6\">replace</span><span class=\"mtk1\">(</span><span class=\"mtk11\">&#39;?auto=compress,format&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk11\">&#39;?q=30&amp;auto=compress,format&#39;</span><span class=\"mtk1\">)</span><span class=\"mtk11\">}`</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk7\">source</span><span class=\"mtk1\">(</span><span class=\"mtk6\">media</span><span class=\"mtk1\">=</span><span class=\"mtk11\">&#39;(min-width: 769px)&#39;</span><span class=\"mtk1\"> </span><span class=\"mtk6\">srcset</span><span class=\"mtk1\">=</span><span class=\"mtk11\">`${</span><span class=\"mtk1\">connection </span><span class=\"mtk7\">===</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&#39;4g&#39;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">||</span><span class=\"mtk1\"> connection </span><span class=\"mtk7\">===</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&#39;undefined&#39;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">?</span><span class=\"mtk1\"> project.project_image.url.</span><span class=\"mtk6\">replace</span><span class=\"mtk1\">(</span><span class=\"mtk11\">&#39;?auto=compress,format&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk11\">&#39;&#39;</span><span class=\"mtk1\">) </span><span class=\"mtk7\">:</span><span class=\"mtk1\"> project.project_image.url.</span><span class=\"mtk6\">replace</span><span class=\"mtk1\">(</span><span class=\"mtk11\">&#39;?auto=compress,format&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk11\">&#39;?q=30&amp;w=1200&amp;auto=compress,format&#39;</span><span class=\"mtk1\">)</span><span class=\"mtk11\">}`</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk7\">img</span><span class=\"mtk6\">.home__projects__item__media__image</span><span class=\"mtk1\">(</span><span class=\"mtk6\">alt</span><span class=\"mtk1\">=project.project_image.alt </span><span class=\"mtk6\">data-src</span><span class=\"mtk1\">=project.project_image.url.</span><span class=\"mtk6\">replace</span><span class=\"mtk1\">(</span><span class=\"mtk11\">&#39;?auto=compress,format&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk11\">&#39;&#39;</span><span class=\"mtk1\">) </span><span class=\"mtk6\">height</span><span class=\"mtk1\">=</span><span class=\"mtk11\">`${</span><span class=\"mtk1\">project.project_image.dimensions.height</span><span class=\"mtk11\">}`</span><span class=\"mtk1\"> </span><span class=\"mtk6\">width</span><span class=\"mtk1\">=</span><span class=\"mtk11\">`${</span><span class=\"mtk1\">project.project_image.dimensions.width</span><span class=\"mtk11\">}`</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span></code></pre>\n<h3>1.4 — Simple Image Example (desktop &#x26; phone)</h3>\n<p>Here is a simple image example, but still, we make sure we serve the right format size for mobile devices as well as for desktops. We double-check the internet connection type; if it is <code>4g</code>, we serve a more sharp/detailed image.</p>\n<pre class=\"grvsc-container abyss\" data-language=\"pug\" data-index=\"5\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">figure</span><span class=\"mtk6\">.services__projects__item__media</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">picture</span><span class=\"mtk1\">(</span><span class=\"mtk6\">height</span><span class=\"mtk1\">=</span><span class=\"mtk11\">`${</span><span class=\"mtk1\">project.project_image.dimensions.height</span><span class=\"mtk11\">}`</span><span class=\"mtk1\"> </span><span class=\"mtk6\">width</span><span class=\"mtk1\">=</span><span class=\"mtk11\">`${</span><span class=\"mtk1\">project.project_image.dimensions.width</span><span class=\"mtk11\">}`</span><span class=\"mtk1\"> </span><span class=\"mtk6\">style</span><span class=\"mtk1\">=</span><span class=\"mtk11\">`background-color: ${</span><span class=\"mtk1\">project.background_color</span><span class=\"mtk11\">}`</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk7\">img</span><span class=\"mtk6\">.services__projects__item__media__image</span><span class=\"mtk1\">(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk6\">alt</span><span class=\"mtk1\">=project.project_image.alt</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk6\">data-src</span><span class=\"mtk1\">=</span><span class=\"mtk11\">`</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">        ${</span><span class=\"mtk1\">connection </span><span class=\"mtk7\">===</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&#39;4g&#39;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">||</span><span class=\"mtk1\"> connection </span><span class=\"mtk7\">===</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&#39;undefined&#39;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">?</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          project.project_image.url.</span><span class=\"mtk6\">replace</span><span class=\"mtk1\">(</span><span class=\"mtk11\">&#39;?auto=compress,format&#39;</span><span class=\"mtk1\">, isPhone </span><span class=\"mtk7\">?</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&#39;?w=480&#39;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">:</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&#39;?w=900&#39;</span><span class=\"mtk1\"> )</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk7\">:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          project.project_image.url.</span><span class=\"mtk6\">replace</span><span class=\"mtk1\">(</span><span class=\"mtk11\">&#39;?auto=compress,format&#39;</span><span class=\"mtk1\">, isPhone </span><span class=\"mtk7\">?</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&#39;?q=30&amp;w=360&amp;auto=compress,format&#39;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">:</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&#39;?q=30&amp;w=600&amp;auto=compress,format&#39;</span><span class=\"mtk1\">)</span><span class=\"mtk11\">}`</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk6\">height</span><span class=\"mtk1\">=</span><span class=\"mtk11\">`${</span><span class=\"mtk1\">project.project_image.dimensions.height</span><span class=\"mtk11\">}`</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk6\">width</span><span class=\"mtk1\">=</span><span class=\"mtk11\">`${</span><span class=\"mtk1\">project.project_image.dimensions.width</span><span class=\"mtk11\">}`</span><span class=\"mtk1\">)</span></span></span></code></pre>\n<h2>2 — Responsive Video with JavaScript</h2>\n<p>On this chapter will take a quick look on how to be able to mimic the <strong>responsive image</strong> aspect, but on video. We can achieve this by using a <code>&#x3C;video></code> HTML element with a <code>data-src</code> data-attribute.</p>\n<h3>2.1 — Responsive Video Code — JavaScript</h3>\n<pre class=\"grvsc-container abyss\" data-language=\"js\" data-index=\"6\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// responsive video</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk15 mtki\">function</span><span class=\"mtk1\"> </span><span class=\"mtk6\">responsiveVideo</span><span class=\"mtk1\">(</span><span class=\"mtk19 mtki\">window</span><span class=\"mtk1\">, </span><span class=\"mtk19 mtki\">undefined</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk15 mtki\">function</span><span class=\"mtk1\"> </span><span class=\"mtk6\">videoSourceSet</span><span class=\"mtk1\">(</span><span class=\"mtk19 mtki\">options</span><span class=\"mtk1\">, </span><span class=\"mtk19 mtki\">elements</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    options </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk15 mtki\">Object</span><span class=\"mtk1\">.</span><span class=\"mtk6\">assign</span><span class=\"mtk1\">({}, { resize: </span><span class=\"mtk4\">false</span><span class=\"mtk1\">, resizeDelay: </span><span class=\"mtk4\">50</span><span class=\"mtk1\"> }, options);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk7\">if</span><span class=\"mtk1\"> (elements </span><span class=\"mtk7\">===</span><span class=\"mtk1\"> </span><span class=\"mtk4\">undefined</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      elements </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> document.</span><span class=\"mtk6\">getElementsByTagName</span><span class=\"mtk1\">(</span><span class=\"mtk11\">&#39;video&#39;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk15 mtki\">var</span><span class=\"mtk1\"> regex </span><span class=\"mtk7\">=</span><span class=\"mtk11\"> /</span><span class=\"mtk7\">^</span><span class=\"mtk4\">\\s</span><span class=\"mtk7\">*</span><span class=\"mtk11\">(</span><span class=\"mtk4\">.</span><span class=\"mtk7\">+</span><span class=\"mtk11\">)</span><span class=\"mtk4\">\\s</span><span class=\"mtk7\">+</span><span class=\"mtk11\">(</span><span class=\"mtk4\">\\d</span><span class=\"mtk7\">+</span><span class=\"mtk11\">)(</span><span class=\"mtk4\">[wh]</span><span class=\"mtk11\">)</span><span class=\"mtk7\">?</span><span class=\"mtk4\">\\s</span><span class=\"mtk7\">*$</span><span class=\"mtk11\">/</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk15 mtki\">function</span><span class=\"mtk1\"> </span><span class=\"mtk6\">getSourceSets</span><span class=\"mtk1\">(</span><span class=\"mtk19 mtki\">def</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk15 mtki\">var</span><span class=\"mtk1\"> sources </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> [];</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk15 mtki\">var</span><span class=\"mtk1\"> parts </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> def.</span><span class=\"mtk6\">split</span><span class=\"mtk1\">(</span><span class=\"mtk11\">&#39;,&#39;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk7\">for</span><span class=\"mtk1\"> (</span><span class=\"mtk15 mtki\">var</span><span class=\"mtk1\"> i </span><span class=\"mtk7\">in</span><span class=\"mtk1\"> parts) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk15 mtki\">var</span><span class=\"mtk1\"> result;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk7\">if</span><span class=\"mtk1\"> ((result </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> parts[i].</span><span class=\"mtk6\">match</span><span class=\"mtk1\">(regex))) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          sources.</span><span class=\"mtk6\">push</span><span class=\"mtk1\">({ width: </span><span class=\"mtk15\">parseInt</span><span class=\"mtk1\">(result[</span><span class=\"mtk4\">2</span><span class=\"mtk1\">]), src: result[</span><span class=\"mtk4\">1</span><span class=\"mtk1\">] });</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk7\">return</span><span class=\"mtk1\"> sources;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk15 mtki\">function</span><span class=\"mtk1\"> </span><span class=\"mtk6\">selectSource</span><span class=\"mtk1\">(</span><span class=\"mtk19 mtki\">srcsrt</span><span class=\"mtk1\">, </span><span class=\"mtk19 mtki\">screenWidth</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk15 mtki\">var</span><span class=\"mtk1\"> sources </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">getSourceSets</span><span class=\"mtk1\">(srcsrt);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk15 mtki\">var</span><span class=\"mtk1\"> selectedDiff </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk4\">null</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk15 mtki\">var</span><span class=\"mtk1\"> source </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk4\">null</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk7\">for</span><span class=\"mtk1\"> (</span><span class=\"mtk15 mtki\">var</span><span class=\"mtk1\"> i </span><span class=\"mtk7\">in</span><span class=\"mtk1\"> sources) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk15 mtki\">var</span><span class=\"mtk1\"> candidate </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> sources[i];</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk15 mtki\">var</span><span class=\"mtk1\"> candidateDiff </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> candidate.width </span><span class=\"mtk7\">-</span><span class=\"mtk1\"> screenWidth;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk7\">if</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          source </span><span class=\"mtk7\">===</span><span class=\"mtk1\"> </span><span class=\"mtk4\">null</span><span class=\"mtk1\"> </span><span class=\"mtk7\">||</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          (selectedDiff </span><span class=\"mtk7\">&lt;</span><span class=\"mtk1\"> </span><span class=\"mtk4\">0</span><span class=\"mtk1\"> </span><span class=\"mtk7\">&amp;&amp;</span><span class=\"mtk1\"> candidateDiff </span><span class=\"mtk7\">&gt;=</span><span class=\"mtk1\"> </span><span class=\"mtk4\">0</span><span class=\"mtk1\">) </span><span class=\"mtk7\">||</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          (candidateDiff </span><span class=\"mtk7\">&lt;</span><span class=\"mtk1\"> </span><span class=\"mtk4\">0</span><span class=\"mtk1\"> </span><span class=\"mtk7\">&amp;&amp;</span><span class=\"mtk1\"> candidateDiff </span><span class=\"mtk7\">&gt;</span><span class=\"mtk1\"> selectedDiff) </span><span class=\"mtk7\">||</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          (candidateDiff </span><span class=\"mtk7\">&gt;=</span><span class=\"mtk1\"> </span><span class=\"mtk4\">0</span><span class=\"mtk1\"> </span><span class=\"mtk7\">&amp;&amp;</span><span class=\"mtk1\"> candidateDiff </span><span class=\"mtk7\">&lt;</span><span class=\"mtk1\"> selectedDiff)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        ) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          selectedDiff </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> candidateDiff;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          source </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> candidate.src;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk7\">return</span><span class=\"mtk1\"> source;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk15 mtki\">function</span><span class=\"mtk1\"> </span><span class=\"mtk6\">init</span><span class=\"mtk1\">(</span><span class=\"mtk19 mtki\">elements</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk7\">for</span><span class=\"mtk1\"> (</span><span class=\"mtk15 mtki\">var</span><span class=\"mtk1\"> i </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk4\">0</span><span class=\"mtk1\">; i </span><span class=\"mtk7\">&lt;</span><span class=\"mtk1\"> elements.length; i</span><span class=\"mtk7\">++</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk15 mtki\">var</span><span class=\"mtk1\"> element </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> elements[i];</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk7\">if</span><span class=\"mtk1\"> (element.tagName </span><span class=\"mtk7\">==</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&#39;VIDEO&#39;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">&amp;&amp;</span><span class=\"mtk1\"> element.</span><span class=\"mtk6\">hasAttribute</span><span class=\"mtk1\">(</span><span class=\"mtk11\">&#39;srcset&#39;</span><span class=\"mtk1\">)) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk15 mtki\">var</span><span class=\"mtk1\"> srcset </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> element.</span><span class=\"mtk6\">getAttribute</span><span class=\"mtk1\">(</span><span class=\"mtk11\">&#39;srcset&#39;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk7\">if</span><span class=\"mtk1\"> (srcset) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk15 mtki\">var</span><span class=\"mtk1\"> selectedSource </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">selectSource</span><span class=\"mtk1\">(srcset, window.innerWidth);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk7\">if</span><span class=\"mtk1\"> (selectedSource </span><span class=\"mtk7\">!==</span><span class=\"mtk1\"> element.src) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">              element.src </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> selectedSource;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">              </span><span class=\"mtk3\">// fix intersecObserver</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">              </span><span class=\"mtk15 mtki\">var</span><span class=\"mtk1\"> playPromise </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> element.</span><span class=\"mtk6\">play</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">              </span><span class=\"mtk7\">if</span><span class=\"mtk1\"> (playPromise </span><span class=\"mtk7\">!==</span><span class=\"mtk1\"> </span><span class=\"mtk4\">undefined</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                playPromise</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                  .</span><span class=\"mtk6\">then</span><span class=\"mtk1\">((</span><span class=\"mtk19 mtki\">_</span><span class=\"mtk1\">) </span><span class=\"mtk15 mtki\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    element.</span><span class=\"mtk6\">pause</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                  })</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                  .</span><span class=\"mtk6\">catch</span><span class=\"mtk1\">((</span><span class=\"mtk19 mtki\">error</span><span class=\"mtk1\">) </span><span class=\"mtk15 mtki\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    error </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk4\">null</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                  });</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">              }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk6\">init</span><span class=\"mtk1\">(elements);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk7\">if</span><span class=\"mtk1\"> (options.resize) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk15 mtki\">var</span><span class=\"mtk1\"> resizeDelayTimeout </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk4\">null</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      window.</span><span class=\"mtk6\">addEventListener</span><span class=\"mtk1\">(</span><span class=\"mtk11\">&#39;resize&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk15 mtki\">function</span><span class=\"mtk1\"> () {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk7\">if</span><span class=\"mtk1\"> (resizeDelayTimeout </span><span class=\"mtk7\">!==</span><span class=\"mtk1\"> </span><span class=\"mtk4\">null</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk15\">clearTimeout</span><span class=\"mtk1\">(resizeDelayTimeout);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        resizeDelayTimeout </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk15\">setTimeout</span><span class=\"mtk1\">(</span><span class=\"mtk15 mtki\">function</span><span class=\"mtk1\"> () {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk6\">init</span><span class=\"mtk1\">(elements);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        }, options.resizeDelay);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      });</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  window.videoSourceSet </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> videoSourceSet;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">responsiveVideo</span><span class=\"mtk1\">(window);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">videoSourceSet</span><span class=\"mtk1\">({ resize: </span><span class=\"mtk4\">true</span><span class=\"mtk1\">, resizeDelay: </span><span class=\"mtk4\">1000</span><span class=\"mtk1\"> });</span></span></span></code></pre>\n<h3>2.2 — Responsive Video Code — PugJS &#x26; HTML</h3>\n<p>In order to be able to use the magic from the above code, we have to use the code below. Please note that the <code>src</code> attribute on the <code>&#x3C;video></code> element will be added automatically with the JavaScript code.</p>\n<p>1 - PugJS version</p>\n<pre class=\"grvsc-container abyss\" data-language=\"pug\" data-index=\"7\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">video</span><span class=\"mtk1\">(</span><span class=\"mtk6\">preload</span><span class=\"mtk1\">=</span><span class=\"mtk11\">&quot;auto&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk6\">playsinline</span><span class=\"mtk1\"> </span><span class=\"mtk6\">loop</span><span class=\"mtk1\"> </span><span class=\"mtk6\">muted</span><span class=\"mtk1\"> </span><span class=\"mtk6\">disablepictureinpicture</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk6\">srcset</span><span class=\"mtk1\">=</span><span class=\"mtk11\">`</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">    ${</span><span class=\"mtk1\">section.primary.video_mobile.url</span><span class=\"mtk11\">} 768w,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">    ${</span><span class=\"mtk1\">section.primary.video_desktop.url</span><span class=\"mtk11\">} 769w</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">  `</span><span class=\"mtk1\">)</span></span></span></code></pre>\n<p>2 - HTML version</p>\n<pre class=\"grvsc-container abyss\" data-language=\"html\" data-index=\"8\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">&lt;</span><span class=\"mtk7\">video</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk6\">preload</span><span class=\"mtk1\">=</span><span class=\"mtk11\">&quot;auto&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk6\">playsinline</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk6\">loop</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk6\">muted</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk6\">disablepictureinpicture</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk6\">srcset</span><span class=\"mtk1\">=</span><span class=\"mtk11\">&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">    https://media-creators.cdn.prismic.io/media-creators/85ff18ed-2238-4095-bdd6-ae19a6a5d502_pierre-sports__shop-product__mobile.mp4 768w, </span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">    https://media-creators.cdn.prismic.io/media-creators/6cdb67a6-3fe0-4429-98b7-237c7c6aa84c_pierre-sports__shop-product%401920_lighter.mp4 769w</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">  &quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">&gt;&lt;/</span><span class=\"mtk7\">video</span><span class=\"mtk1\">&gt;</span></span></span></code></pre>\n<h3>2.3 — Use an <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API\" target=\"_blank\" rel=\"noopener\">Intersection Observer</a> to <code>play()</code> the <code>&#x3C;video></code>when it is <em>only</em> visible on the screen</h3>\n<p>Here you can see the core concept idea using the <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API\" target=\"_blank\" rel=\"noopener\">Intersection Observer API</a> to check if the <code>&#x3C;video></code> is currently visible on the user's screen.</p>\n<h4>2.3.1 — Code Example — Video plays only when is visible</h4>\n<pre class=\"grvsc-container abyss\" data-language=\"js\" data-index=\"9\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// Video.js</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">import</span><span class=\"mtk1\"> Animation </span><span class=\"mtk7\">from</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&#39;classes/Animation&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">export</span><span class=\"mtk1\"> </span><span class=\"mtk7\">default</span><span class=\"mtk1\"> </span><span class=\"mtk15 mtki\">class</span><span class=\"mtk1\"> </span><span class=\"mtk7\">extends</span><span class=\"mtk1\"> </span><span class=\"mtk6 mtki mtku\">Animation</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk15 mtki\">constructor</span><span class=\"mtk1\">({ </span><span class=\"mtk19 mtki\">element</span><span class=\"mtk1\"> }) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    super({</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      element,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    });</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk6\">animateIn</span><span class=\"mtk1\">() {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    this.element?.</span><span class=\"mtk6\">play</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk6\">animateOut</span><span class=\"mtk1\">() {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    this.element?.</span><span class=\"mtk6\">pause</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<h4>2.3.2 — Code Example — Animation JS <code>class</code> using the <code>window.IntersectionObserver</code> to make all the magic</h4>\n<p>Pay special attention to the <code>createObserver()</code> function and see how it works.</p>\n<pre class=\"grvsc-container abyss\" data-language=\"js\" data-index=\"10\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// Animation.js</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">import</span><span class=\"mtk1\"> AutoBind </span><span class=\"mtk7\">from</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&#39;auto-bind&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">export</span><span class=\"mtk1\"> </span><span class=\"mtk7\">default</span><span class=\"mtk1\"> </span><span class=\"mtk15 mtki\">class</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk15 mtki\">constructor</span><span class=\"mtk1\">({ </span><span class=\"mtk19 mtki\">element</span><span class=\"mtk1\">, </span><span class=\"mtk19 mtki\">elements</span><span class=\"mtk1\"> }) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk6\">AutoBind</span><span class=\"mtk1\">(this);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk15 mtki\">const</span><span class=\"mtk1\"> { animationDelay, animationTarget } </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> element.dataset;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    this.delay </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> animationDelay;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    this.element </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> element;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    this.elements </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> elements;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    this.target </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> animationTarget </span><span class=\"mtk7\">?</span><span class=\"mtk1\"> element.</span><span class=\"mtk6\">closest</span><span class=\"mtk1\">(animationTarget) </span><span class=\"mtk7\">:</span><span class=\"mtk1\"> element;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    this.isVisible </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk4\">false</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk7\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk11\">&#39;IntersectionObserver&#39;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">in</span><span class=\"mtk1\"> window) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      this.</span><span class=\"mtk6\">createObserver</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      this.</span><span class=\"mtk6\">animateOut</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    } </span><span class=\"mtk7\">else</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      this.</span><span class=\"mtk6\">animateIn</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk6\">createObserver</span><span class=\"mtk1\">() {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    this.observer </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">new</span><span class=\"mtk1\"> </span><span class=\"mtk5 mtku\">window</span><span class=\"mtk1\">.</span><span class=\"mtk5 mtku\">IntersectionObserver</span><span class=\"mtk1\">((</span><span class=\"mtk19 mtki\">entries</span><span class=\"mtk1\">) </span><span class=\"mtk15 mtki\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      entries.</span><span class=\"mtk6\">forEach</span><span class=\"mtk1\">((</span><span class=\"mtk19 mtki\">entry</span><span class=\"mtk1\">) </span><span class=\"mtk15 mtki\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk7\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk7\">!</span><span class=\"mtk1\">this.isVisible </span><span class=\"mtk7\">&amp;&amp;</span><span class=\"mtk1\"> entry.isIntersecting) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          this.</span><span class=\"mtk6\">animateIn</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        } </span><span class=\"mtk7\">else</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          this.</span><span class=\"mtk6\">animateOut</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      });</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }).</span><span class=\"mtk6\">observe</span><span class=\"mtk1\">(this.target);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk6\">animateIn</span><span class=\"mtk1\">() {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    this.isVisible </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk4\">true</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk6\">animateOut</span><span class=\"mtk1\">() {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    this.isVisible </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk4\">false</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n  .abyss { background-color: #000c18; }\n  .abyss .mtku {\n    text-decoration: underline;\n    text-underline-position: under;\n  }\n  .abyss .mtki { font-style: italic; }\n  .abyss .mtk3 { color: #384887; }\n  .abyss .mtk7 { color: #225588; }\n  .abyss .mtk1 { color: #6688CC; }\n  .abyss .mtk11 { color: #22AA44; }\n  .abyss .mtk6 { color: #DDBB88; }\n  .abyss .mtk15 { color: #9966B8; }\n  .abyss .mtk4 { color: #F280D0; }\n  .abyss .mtk19 { color: #2277FF; }\n  .abyss .mtk5 { color: #FFEEBB; }\n  .abyss .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(255, 255, 255, 0.1));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(255, 255, 255, 0.5));\n  }\n</style>","frontmatter":{"date":"April 21, 2022","title":"Code Examples of the Media Creators (NodeJS) website\n","description":"Here is shown a few precious pieces of code, to help in the near future, when no one knows what this all is about.\n","tags":["Image Optimization","Internet Connections","JavaScript","NodeJS","Performance","Prismic.io","PugJS","Usability","User Experience","Video","Web Development"]}}},"pageContext":{"id":"f708efa8-62b3-5218-a6bb-8cdd65756c9d"}},
    "staticQueryHashes": ["4080856488"]}